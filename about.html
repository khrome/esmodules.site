<!DOCTYPE html>
<html lang="en"> 
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <title>ES Modules</title>
        <meta name="description" content="Native ES Module Development">
        <link rel="author" href="https://github.com/khrome">
        
        <!-- FB -->
        <meta property="og:title" content="Native ES Module Development">
        <meta property="og:type" content="blog">
        <meta property="og:image" content="https://www.esmodules.site/images/jsm-logo.png">
        <meta property="og:url" content="https://www.esmodules.site/">
        <meta property="og:description" content="Navigating the difficult, sometimes confusing road to native modules.">
        <meta property="fb:admins" content="khrome">
        
        <!-- Twitter -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:url" content="https://www.esmodules.site/">
        <meta name="twitter:title" content="Native ES Module Development">
        <meta name="twitter:description" content="Navigating the difficult, sometimes confusing road to native modules.">
        <meta name="twitter:image" content="https://www.esmodules.site/images/jsm-logo.png">
        <link rel="stylesheet" href="./style.css">
        <script type="importmap"> { "imports": {
            "esmodule-banner": "./esmodule-banner.mjs"
        } }</script>
    </head>
    <body>
        <script type="module"> import 'esmodule-banner'; </script>
        <module-banner 
            firefox="supported" 
            chrome="supported" 
            safari="supported" 
            edge="supported" 
            nodejs="supported" 
            support="none" 
            mechanism="import" 
            toolchain="n" 
            format="global"
         ></module-banner>
        <fork-banner url="https://github.com/khrome/esmodules.site"></fork-banner>
        <main>
            <h1> About </h1>
            <section>
                <h2> How did this Happen? </h2>
                <p>
                    Given that the entire justification for babel pipelines was their eventual compatibility with the upcoming module system, I've always been expecting to have a functional module environment land where we can get back to write once, run anywhere JS development (again, as promised by modules). But, just as everyone who has used them, I discovered nothing was module compatible, despite their babel import syntax. So while browser support (and crucially import map support) landed, I kind of tuned out... but even when safari finally closed the gap, the situation in library space had not improved. I realized that to deliver my promised testable, module based <a href="https://www.npmjs.com/package/ascii-art">ascii-art</a> rewrite I would have to both rebuild many of it's dependencies as well as solve the lifecycle and testing problems myself. So I decided to resurrect an old canvas based image editing library as a proxy for that work (and so I could bring a relatively mature system to the rewrite when everything was ready).
                </p>
                <p>
                    First, in order to evaluate how difficult this would be, I wanted a project that was practical and based on a single foundational library that had good support on the client and server for native es modules. I decided on three.js and to use a mocha + chai setup similar to what I've been using for years, but with an additional static html harness for interactive browser running. The project would be a <a href="https://github.com/khrome/submesh-treadmill">3d treadmill</a> for loading world chunks in and out of memory in a large, continuous world.
                </p>
                <p>
                    Next I ported an old mootools canvas oriented image editing library I wrote a decade ago to vanillaJS + esmodules. This required I build <a href="https://github.com/environment-safe/canvas">an abstraction to bridge the canvas</a> available in the browser vs node.js as well as to wrapper some things for testing so we could have a single test file for everything. Additionally I wanted to be able to run the test in the all the supported browsers as well as in node and to have normal test runner output. This required me writing my own <a href="https://www.npmjs.com/package/@open-automaton/moka">mocha test runner</a> which could do the browser parts of this. This was <a href="https://khrome.github.io/image-booth/">successful</a>.
                </p>
                <p>
                    Once this was done, I decided to rewrite some of my sites and GUI libraries using what I had learned in order to confirm this worked widely across browsers. As I was doing this, I realized there were no support sites to provide a banner or encourage adoption. These were services  that were present for the transition to css (<a href="https://www.csszengarden.com/">CSS zen garden</a>), to html5 (html5.com (no longer active)) and webcomponents (<a href="https://www.webcomponents.org/">wecomponents.org</a>) (even RDF and OWL got more support than vanilla es modules). At the same time I could provide a concise support matrix, given the complexity of different scenarios and the user expectations. That was why I created this site. Hopefully it will become a community resource which is powered by community contributions, but until then I'm over here... porting all my libraries slowly to esmodules.
                </p>
                <p>
                    - <a href="https://www.abbeyhawksparrow.com/">Abbey Hawk Sparrow</a>
                </p>
            </section>
            <footer>
                <div>
                    <h3>Reference</h3>
                    <ul>
                        <li><a href="https://262.ecma-international.org/6.0/#sec-modules">Modules Spec</a></li>
                        <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">MDN Docs</a></li>
                        <li><a href="https://nodejs.org/api/esm.html">Node.js Docs</a></li>
                        <li><a href="https://www.sitepoint.com/understanding-es6-modules-via-their-history/">History</a></li>
                        <li><a href="https://modern-web.dev/guides/going-buildless/es-modules/">Going Buildless</a></li>
                        <li><a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/">Module Deep Dive</a></li>
                        <li><a href="https://betterprogramming.pub/back-to-the-future-with-es-modules-js-without-build-ee2c207a4439">Back to the Future</a></li>
                    </ul>
                </div>
                <div>
                    <h3>Tools</h3>
                    <ul>
                        <li><a href="get.html">Get a Banner</a></li>
                        <li><a href="https://github.com/environment-safe">@environment-safe</a></li>
                        <li><a href="https://www.npmjs.com/package/@open-automaton/moka">moka</a></li>
                        <li><a href="https://generator.jspm.io/">create importmap</a></li>
                        <li><a href="https://www.npmjs.com/package/wing-kong">wing-kong</a></li>
                        <li><a href="https://github.com/chase-moskal/importly">importly</a></li>
                    </ul>
                </div>
                <div>
                    <h3>Examples</h3>
                    <ul>
                        <li><a href="https://musicbox.fun/">MusicBox</a>[<a href="https://www.bryanbraun.com/2020/10/23/es-modules-in-production-my-experience-so-far/">blog</a>]</li>
                        <li><a href="https://khrome.github.io/image-booth/">image-booth</a></li>
                        <li><a href="https://www.runpkg.com/">RUNPKG</a></li>
                        <li><a href="https://philipwalton.com/">Phillip Walton</a></li>
                    </ul>
                </div>
                <div>
                    <h3>Information</h3>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="privacy.html">Privacy</a></li>
                        <li><a href="terms.html">Terms</a></li>
                        <li><a href="build.html">Build</a></li>
                        <li><a href="formats.html">Formats</a></li>
                    </ul>
                </div>
            </footer>
        </main>
    </body>
</html>